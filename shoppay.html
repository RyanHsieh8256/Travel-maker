<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/main.css">
    <title>訂購</title>
    <link rel="shortcut icon" href="images/logo/logo_84x50.png" type="image/png">
    <!--放在head裡-->
    <script src="js/jquery.js"></script>
    <script src="js/vue.js"></script>
</head>

<body class="shoppay_bg">
    <header>
        <!-- 宸哥的導覽列 -->
        <nav class="nav_Wrap">
            <section class="navBlock">
                <a href="home.html">
                    <h1 class="navLogo">
                        <img src="images/logo/logo_84x50.png" alt="TravelMaker">
                    </h1>
                </a>
                <ul class="mainNav">
                    <a href="tour.html"><li>行程規劃</li></a>
                    <a href="group.html"><li>揪團旅行</li></a>
                    <a href="shop.html"><li>景點門票</li></a>
                    <a href="postcard.html"><li>客製明信片</li></a>
                </ul>
                <ul class="navMember">
                    <li><a href="shopcart.html"><i class="bi bi-minecart-loaded"></i></a></li>
                    <li>
                        <i class="bi bi-person-circle" id="loginBoxBtn"><span>登入/註冊</span></i>
                        <!-- 登入後的會員選單-->
                        <ul class="navDropdownMenu">
                            <li class="navDropdownMenuItem navMemProfile">
                                <div class="navDropdownMenuPhoto">
                                    <img src="https://picsum.photos/200/200/?random=10">
                                </div>
                                <div class="navDropdownMenuTitle">
                                    <span>張小明</span>
                                </div>
                            </li>
                            <li class="navDropdownMenuItem"><i class="bi bi-gear"></i> 帳號設定</li>
                            <li class="navDropdownMenuItem"><i class="bi bi-calendar2"></i> 我的行程</li>
                            <li class="navDropdownMenuItem"><i class="bi bi-bookmark-heart"></i> 我的收藏</li>
                            <li class="navDropdownMenuItem"><i class="bi bi-file-person"></i> 我的揪團</li>
                            <li class="navDropdownMenuItem"><i class="bi bi-bag"></i> 我的訂單</li>
                        </ul>
                    </li>
                    <li>
                        <div class="burger-toggle">
                            <i class="bi bi-list"></i>
                        </div>
                    </li>
                </ul>
            </section>          
        </nav>
        <!-- 漢堡 -->
        <div class="navPage">
            <button class="navPage--close">
                <span class="close_line"></span>
                <span class="close_line"></span>
            </button>
            <div class="navPage_wrap">
            <!--     <div class="navPage_header"></div> -->
                <div class="navPage_content">
            <!--       <div class="navPage_logo"></div> -->
                    <div class="navPage_box">
                        <nav class="navPage_nav">
                            <ul class="navPage_list">
                                <li class="navPage_item">
                                    <div class="navPage_header">
                                    <span class="navPage_header--num">01</span>
                                    <span class="navPage_header--line"></span>
                                    </div>
                                    <div class="navPage_text">
                                    <span class="navPage_text--en">Plan journey</span>
                                    <span class="navPage_text--ch">行程規劃</span>
                                    </div>
                                    <a href="tour.html" class="navPage_link"></a>
                                </li>
                                <li class="navPage_item">
                                    <div class="navPage_header">
                                    <span class="navPage_header--num">02</span>
                                    <span class="navPage_header--line"></span>
                                    </div>
                                    <div class="navPage_text">
                                    <span class="navPage_text--en">All together</span>
                                    <span class="navPage_text--ch">揪團旅行</span>
                                    </div>
                                    <a href="group.html" class="navPage_link"></a>
                                </li>
                                <li class="navPage_item">
                                    <div class="navPage_header">
                                    <span class="navPage_header--num">03</span>
                                    <span class="navPage_header--line"></span>
                                    </div>
                                    <div class="navPage_text">
                                    <span class="navPage_text--en">Shop</span>
                                    <span class="navPage_text--ch">景點門票</span>
                                    </div>
                                    <a href="shop.html" class="navPage_link"></a>
                                </li>
                                <li class="navPage_item">
                                    <div class="navPage_header">
                                    <span class="navPage_header--num">04</span>
                                    <span class="navPage_header--line"></span>
                                    </div>
                                    <div class="navPage_text">
                                    <span class="navPage_text--en">Postcard</span>
                                    <span class="navPage_text--ch">客製明信片</span>
                                    </div>
                                    <a href="postcard.html" class="navPage_link"></a>
                                </li>
                            </ul>
                        </nav>

                    </div>
                </div>  
            </div>
        </div>

        <div class="froLoginBG" id="froLoginBG">
            <section class="froLoginBlock" id="froLoginBlock">
                <!-- 取消按鈕 -->
                <div class="froLoginCancel">
                    <button><i class="bi bi-x-circle-fill"></i></button>
                </div>
                <!-- 註冊/登入 -->
                <div class="froLoginSwitch">
                    <div class="froLoginSwitch_btn froLoginSwitch_active" @click="content='login',content2='loginbear'">
                        登入
                    </div>
                    <div class="froLoginSwitch_btn" @click="content='signin',content2='singinbear'">
                        註冊
                    </div>
                </div> 
                <!-- 表單區 -->
                <div class="froLoginForm_wrap">
                    <transition name="frologintransition" mode="out-in">
                        <keep-alive>
                            <component :is='content'></component>
                        </keep-alive>
                    </transition>
                </div>
                <transition name="mascottransition">
                    <component :is='content2'></component>
                </transition>
            </section>
        </div>
    </header>

    <main>
        <div class="filter">
            <section class="l-full shoppayinfo">
                <div class="personal_info">
                    <h2>訂購人資料</h2>
                    <hr>
                    <div class="name">
                        <div class="first">名字<span class="required">*</span><br><input type="text" placeholder="例.大明" required></div>
                        <div class="last">姓氏<span class="required">*</span><br><input type="text" placeholder="例.王" required></div>
                    </div>
                    <div class="contact">
                        <div class="phonenumber">
                            <p>電話<span class="required">*</span></p>
                            <div class="phone">
                                <input type="text" id="checkphone" onkeyup="checkPhone()" placeholder="請輸入連絡電話" maxlength="10" required>
                                <p id="phoneerror">電話有誤</p>
                            </div>
                        </div>
                        
                        <div class="emailadress">
                            <p>email<span class="required">*</span></p>
                            <div class="email">
                                <input type="text" id="checkemail" onkeyup="checkEmail()" placeholder="例. 123@mail.com" required>
                                <p id="emailerror">email有誤</p>
                            </div>
                        </div>
                        
                    </div>
                </div>
            </section>
            
            <section class="l-full shoppaymethod">
                <div class="shoppaycredit">
                     <h2>付款方式</h2>
                    <hr>
                    <div class="shoppaycredit_info">
                        <form>
                            <div class="creditnumber">
                                <p>卡號<span class="required">*</span></p>
                                <div class="cardnumber">
                                    <input type="text" id="checknumber" onkeyup="checkCredit()" placeholder="0000-0000-0000-0000" minlength="9" maxlength="19" required>
                                    <p id="carderror">卡號有誤</p>
                                </div>
                            </div>
                            <div class="exp">
                                <p>有效期限<span class="required">*</span></p>
                                <div class="expdate">
                                    <input type="text" id="expcheck" placeholder="MM/YY" maxlength="5" required><p id="experror">日期有誤</p>
                                </div>
                            </div>
                            <div class="pass">驗證碼<span class="required">*</span><br><input type="text"  
                               id="cvc" placeholder="CVC/CVC" maxlength="3" required></div>
                        </form>
                        
                        
                    </div>
                </div>
            </section>

            <section class="l-full shoppaydetail">
                <div class="detail">
                    <h2>消費明細</h2>
                    <hr>
                    <div class="shoplist">
                        <div class="pro_img">
                            <img src="images/shop/shopType_north.jpg">
                        </div>
                        <div class="shoplist_text">
                            <h3>商品名稱</h3>
                            <div class="content_wrap">
                                <p class="content">內容 ex.全票*4 半票*1 優待票*1</p>
                                <span class="sub">$1234</span>
                            </div>
                        </div>
                    </div>
                    <hr>
                    <div class="shoplist">
                        <div class="pro_img">
                            <img src="images/shop/shopType_north.jpg">
                        </div>
                        <div class="shoplist_text">
                            <h3>商品名稱</h3>
                            <div class="content_wrap">
                                <p class="content">內容 ex.全票*4 半票*1 優待票*1</p>
                                <span class="sub">$1234</span>
                            </div>
                        </div>
                    </div>
                    <hr>
                    <div class="shoplist">
                        <div class="pro_img">
                            <img src="images/shop/shopType_north.jpg">
                        </div>
                        <div class="shoplist_text">
                            <h3>商品名稱</h3>
                            <div class="content_wrap">
                                <p class="content">內容 ex.全票*4 半票*1 優待票*1</p>
                                <span class="sub">$1234</span>
                            </div>
                        </div>
                    </div>
                    <hr>
                        <div class="shoplist_total">
                            <p >有效期限<span class="deadline"></span></p>
                            <p class="shoptotal">總金額 TWD &emsp;<span id="shoptotal">$12345</span> </p>
                        </div>
                </div>
            </section>

            <section class="l-full shoppayconfirm">
                <a href="#"><button class="btn btn--cart confirm">確認付款</button></a>
            </section>
        </div>
    </main>

    <footer class="footer_Wrap">
        <section class="footerBlock">
            <ul class="footerMedia">
                <a href=""><li><i class="bi bi-facebook"></i></li></a>
                <a href=""><li><i class="bi bi-instagram"></i></li></a>
                <a href=""><li><i class="bi bi-line"></i>
                </ion-icon></li></a>
            </ul>
            <ul class="footerContect">
                <li><i class="bi bi-telephone"></i>電話:03-1234567</li>
                <li><i class="bi bi-envelope"></i>服務信箱:<a href="mailto:abc12345@gmail.com">abc12345@gmail.com</a></li>
                <li><i class="bi bi-clock"></i>營業時間:09:00 ~ 18:00(一)~(五)</li>
                <li><i class="bi bi-pin-map"></i>地址:桃園市桃園區中正路99999號</li>
            </ul>
            <ul class="footerTerms">
                <a href=""><li>服務條款</li></a><a href=""><li>購物條款</li></a><a href=""><li>付款方式</li></a>
            </ul>
            <p class="footerCopyRight">&copy;本網站為緯育TibaMe_前端設計工程師班第73期學員專題成果作品，本平台僅供學習、展示之用。若有抵觸有關著作權，或有第三人主張侵害智慧財產權等情事，均由學員負法律上責任，緯育公司概不負責。若有侵權疑慮，您可以私訊[緯育TibaMe]，後續會由專人協助處理。</p>
        </section>
    </footer>

    <script src="js/burger.js"></script>
    <script src="js/forlogin.js"></script>

    <script>
        //------------------deadline----------------
        let deadline = document.querySelectorAll('.deadline'); //取得class deadline
        
        
        // console.log(deadline);
        var myDate = new Date() //取得目前時間
        myDate.setMonth(myDate.getMonth() + 3);  //月份+3個月
        // console.log(myDate);
        let year = myDate.getFullYear();    //取得myDate的年
        let month = myDate.getMonth()+1;    //取得myDate的月(原為實月-1，需加回來)
        let date = myDate.getDate();        //取得myDate的日
        
        for(let i =0;i<deadline.length;i++){
         deadline[i].innerText = `${year} / ${month} / ${date}`;  //結果放入html中 
        }
        // console.log(year, month, date);
        // console.log(`${year} / ${month}/ ${date}`);
        
        //------------------cellphone-----------------------------
        let cellphoneReg =/^09\d{2}-?\d{3}-?\d{3}$/; 

        function checkPhone(){
            let phone = document.getElementById('checkphone');  
            let alert = document.getElementById('phoneerror'); 

            if(cellphoneReg.test(phone.value)){                          
                alert.style.display="none"
            }else{
                alert.style.display="block"  
            }
        }

        
        //------------------email-----------------------------
        let emailReg = /^([a-zA-Z0-9._%-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4})*$/ 


        function checkEmail(){
            let email = document.getElementById('checkemail'); 
            let alert = document.getElementById('emailerror'); 
            if(emailReg.test(email.value)){       
                alert.style.display="none"  
            }else{                          
                alert.style.display="block" 
            }
        }



        //-----------------credit-card-----------------------
        //(信用卡驗證)
        let cardReg = /^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|6011[0-9]{12}|622((12[6-9]|1[3-9][0-9])|([2-8][0-9][0-9])|(9(([0-1][0-9])|(2[0-5]))))[0-9]{10}|64[4-9][0-9]{13}|65[0-9]{14}|3(?:0[0-5]|[68][0-9])[0-9]{11}|3[47][0-9]{13})*$/     //信用卡驗證規則


        function checkCredit(){
            let card = document.getElementById('checknumber');   //取得id number 設變數名為card
            let alert = document.getElementById('carderror');   //取得id error 設變數名為alert
            if(cardReg.test(card.value)){        //如果與rel比較為true
                alert.style.display="none"  
            }else{                          //如果比對為false
                alert.style.display="block"  //顯示錯誤訊息
            }
        }

        //(信用卡格式)
        $("#checknumber").on("input",function(e){
        var oldVal = e.delegateTarget.value;  //返回指定元素
        var newVal = oldVal.replace(/\s/g,'-').replace(/[^\d]/g,'-').replace(/(\d{4})(?=\d)/g,'$1 ');   //指定格式
        $("#checknumber").val(newVal);
        });


        //-----------------exp-------------------------
        document.getElementById("expcheck").addEventListener("keyup",function(e){
        if(e.keyCode!=8 &&(e.keyCode < 37 || e.keyCode > 40)){  //不能是空白、方向鍵
            let checknumber = this.value.replace(/\D+/g,"");  //確認使否為數字
            let now = new Date()  //現在時間
            let rule = (""+now.getFullYear()).slice(-2) * 100 + now.getMonth() + 1;  //取年的後兩位+月份
           
            this.value = checknumber.replace(/(\d{2})(\d*)/,function(d,m,y){
                let alert = document.getElementById('experror');  
                if(m > 12 || y && y.length == 2 && y * 100 + m * 1 < rule){  //月份不能大於12，年份不為0並且不可小於現在的年份
                    alert.style.display="block"  
                    return m + "/" + y;
                }else{
                    alert.style.display="none" 
                    return m + "/" + y;
                }
            })
        }
    },false);

    
            
    </script>
    
</body>
</html>